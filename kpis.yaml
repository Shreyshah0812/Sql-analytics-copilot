# KPI definitions for the Chinook sample database
# These ensure consistent metric calculations across all queries

revenue:
  definition: "SUM(invoices.Total)"
  description: "Total revenue from all invoices"

aov:
  definition: "SUM(invoices.Total) / COUNT(DISTINCT invoices.InvoiceId)"
  description: "Average Order Value - mean revenue per invoice"

total_orders:
  definition: "COUNT(DISTINCT invoices.InvoiceId)"
  description: "Total number of distinct invoices/orders"

total_customers:
  definition: "COUNT(DISTINCT customers.CustomerId)"
  description: "Total number of distinct customers"

tracks_per_album:
  definition: "COUNT(tracks.TrackId) / COUNT(DISTINCT tracks.AlbumId)"
  description: "Average number of tracks per album"

revenue_per_customer:
  definition: "SUM(invoices.Total) / COUNT(DISTINCT customers.CustomerId)"
  description: "Average revenue per customer (LTV proxy)"

top_customers:
  definition: "GROUP BY customers.CustomerId ORDER BY SUM(invoices.Total) DESC"
  description: "Customers ranked by total spend"
